<app-banner
  [backgroundImage]="'assets/img/destinations/cusco/destinations-machu-picchu.webp'"
  [title]="'SECTION_BLOG.TITLE' | translate">
</app-banner>

<div class="flex flex-col items-center px-4 py-10 max-w-7xl mx-auto">
  <p class="text-lg text-gray-700 text-center mb-10">
    {{ 'SECTION_BLOG.DESCRIPTION' | translate }}
  </p>

  <div class="flex flex-col md:flex-row w-full gap-8">
    <!-- Contenido principal -->
    <section class="flex-1">
      <!-- Noticias filtradas -->
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mb-10">
        <app-new-card
          *ngFor="let news of filteredNews"
          [image]="news.image"
          [title]="news.title"
          [category]="news.category"
          [date]="news.date">
        </app-new-card>
      </div>

      <!-- Secciones reutilizables -->
      <app-blog-section
        [titleKey]="'SECTION_BLOG.GUIDE_CUSCO'"
        [city]="'Cusco'"
        [newsList]="allNews">
      </app-blog-section>

      <app-blog-section
        class="mt-10"
        [titleKey]="'SECTION_BLOG.GUIDE_AREQUIPA'"
        [city]="'Arequipa'"
        [newsList]="allNews">
      </app-blog-section>

      <app-blog-section
        class="mt-10"
        [titleKey]="'SECTION_BLOG.HERITAGE.TITLE'"
        [descriptionKey]="'SECTION_BLOG.HERITAGE.DESCRIPTION'"
        [category]="'cultural-heritage'"
        [maxItems]="12"
        [newsList]="allNews">
      </app-blog-section>
    </section>

    <!-- Filtros -->
    <aside class="w-full md:w-1/4 bg-[#042a4e] p-6 rounded-lg text-white">
      <h3 class="text-lg font-bold mb-4">{{ 'SECTION_BLOG.FILTER_TITLE' | translate }}</h3>

      <!-- Búsqueda -->
      <input
        type="text"
        [placeholder]="'SECTION_BLOG.SEARCH' | translate"
        [(ngModel)]="searchTerm"
        (input)="applyFilters()"
        class="mb-4 w-full px-4 py-2 text-black border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />

      <!-- Filtro por ciudad -->
      <h4 class="text-sm font-semibold mb-2">{{ 'SECTION_BLOG.CITY' | translate }}</h4>
      <div class="flex flex-wrap gap-2 mb-4">
        <button
          *ngFor="let city of cities"
          (click)="setCityFilter(city)"
          [ngClass]="{
            'bg-white text-[#042a4e]': filterCity === city,
            'bg-[#1f4068] text-white': filterCity !== city
          }"
          class="px-3 py-1 rounded-full text-sm font-medium hover:bg-white hover:text-[#042a4e] transition">
          {{ 'SECTION_BLOG.CITIES.' + city | translate }}
        </button>
      </div>

      <!-- Filtro por categoría -->
      <h4 class="text-sm font-semibold mb-2">{{ 'SECTION_BLOG.CATEGORY' | translate }}</h4>
      <div class="flex flex-wrap gap-2">
        <button
          *ngFor="let category of categories"
          (click)="setCategoryFilter(category)"
          [ngClass]="{
            'bg-white text-[#042a4e]': filterCategory === category,
            'bg-[#1f4068] text-white': filterCategory !== category
          }"
          class="px-3 py-1 rounded-full text-sm font-medium hover:bg-white hover:text-[#042a4e] transition">
          {{ 'SECTION_BLOG.CATEGORIES.' + category | translate }}
        </button>
      </div>
    </aside>
  </div>
</div>
