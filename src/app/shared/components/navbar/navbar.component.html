<nav [class]="navbarClasses" class="fixed top-0 left-0 w-full transition-all duration-500 flex items-center justify-between px-6 py-4 z-50 bg-[#042A4E]">
  <div class="flex items-center w-full justify-between">
    <!-- Logo -->
    <div [routerLink]="['/home']" class="logo flex text-white font-bold text-lg transition-opacity duration-500 items-center animate-slideDown">
      <img src="/assets/img/logo_andean_1_t.png" alt="Logo" class="h-10 w-auto">
    </div>

    <!-- Menú Hamburguesa (móvil) -->
    <div class="md:hidden">
      <i class="fa-solid fa-bars text-[20px] text-white cursor-pointer" (click)="toggleMenu()"></i>
    </div>

    <!-- Menú principal (desktop) -->
    <ul class="hidden md:flex flex-row text-white w-auto items-center gap-10 text-[17px]">
      <li class="nav-item relative inline-block transition-colors duration-500 animate-slideDown">
        <span class="relative cursor-pointer after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-white after:transition-all after:duration-300 hover:after:w-full">
          {{ 'NAVBAR.HOME' | translate }}
        </span>
      </li>
      <li class="nav-item relative inline-block transition-colors duration-500 animate-slideDown">
        <span class="relative cursor-pointer after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-white after:transition-all after:duration-300 hover:after:w-full">
          {{ 'NAVBAR.DESTINATIONS' | translate }}
        </span>
      </li>
      <li class="nav-item relative">
        <!-- Botón para abrir el submenú -->
        <span (click)="toggleWaysToTravelMenu()" class="cursor-pointer relative flex items-center after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-white after:transition-all after:duration-300 hover:after:w-full">
          {{ 'NAVBAR.WAYS.TITLE' | translate }}
          <i class="fa-solid fa-chevron-down ml-2 text-sm transition-transform"
             [ngClass]="{ 'rotate-180': isWaysToTravelOpen }"></i>
        </span>

        <!-- Submenú -->
        <div
          *ngIf="isWaysToTravelOpen"
          class="absolute flex left-[-100%] gap-10 top-full w-[400%] bg-white text-gray-800 shadow-lg  mt-2 p-5 z-50 transition-all duration-300 overflow-visible"
          >
          <div class="w-[40%] font-semibold">
            <a [routerLink]="['/ways-to-travel/theme']" (click)="toggleStyleMenu()" class="flex flex-row justify-between items-center p-5  hover:bg-gray-100">
              <span>{{ 'NAVBAR.WAYS.STYLES.TITLE' | translate }}</span><span>></span>
            </a>
            <a [routerLink]="['/ways-to-travel/styles']" (click)="toggleTravelByMenu()" class="flex flex-row justify-between items-center p-5 hover:bg-gray-100">
              <span>{{ 'NAVBAR.WAYS.TRAVEL.TITLE' | translate }}</span><span>></span>
            </a>
          </div>
          <div class="w-full">
            <div *ngIf="isStyleOpen">
              <div class="text-2xl font-semibold px-4 py-2">
                {{ 'NAVBAR.WAYS.STYLES.TITLE' | translate }}
              </div>
              <div class="">
                <a [routerLink]="['/ways-to-travel/theme']" class="block px-4 py-2 hover:bg-gray-100">
                  {{ 'NAVBAR.WAYS.STYLES.PREMIUM' | translate }}
                </a>
                <a [routerLink]="['/ways-to-travel/styles']" class="block px-4 py-2 hover:bg-gray-100">
                  {{ 'NAVBAR.WAYS.STYLES.DELUXE' | translate }}
                </a>
                <a [routerLink]="['/ways-to-travel/styles']" class="block px-4 py-2 hover:bg-gray-100">
                  {{ 'NAVBAR.WAYS.STYLES.COMFORT' | translate }}
                </a>
                <a [routerLink]="['/ways-to-travel/styles']" class="block px-4 py-2 hover:bg-gray-100">
                  {{ 'NAVBAR.WAYS.STYLES.SUPERDEALS' | translate }}
                </a>
              </div>
            </div>
            <div *ngIf="!isStyleOpen" class="w-full">
              <div class="text-2xl font-semibold px-4 py-2">
                {{ 'NAVBAR.WAYS.TRAVEL.TITLE' | translate }}
              </div>
              <div class="flex flex-row justify-between w-full">
                <div>
                  <a [routerLink]="['/ways-to-travel/theme']" class="block px-4 py-2 hover:bg-gray-100">
                    {{ 'NAVBAR.WAYS.TRAVEL.CRUISE' | translate }}
                  </a>
                  <a [routerLink]="['/ways-to-travel/styles']" class="block px-4 py-2 hover:bg-gray-100">
                    {{ 'NAVBAR.WAYS.TRAVEL.TREKKING' | translate }}
                  </a>
                  <a [routerLink]="['/ways-to-travel/styles']" class="block px-4 py-2 hover:bg-gray-100">
                    {{ 'NAVBAR.WAYS.TRAVEL.FULLDAY' | translate }}
                  </a>
                  <a [routerLink]="['/ways-to-travel/styles']" class="block px-4 py-2 hover:bg-gray-100">
                    {{ 'NAVBAR.WAYS.TRAVEL.FAMILY' | translate }}
                  </a>
                </div>
                <div>
                  <a [routerLink]="['/ways-to-travel/styles']" class="block px-4 py-2 hover:bg-gray-100">
                    {{ 'NAVBAR.WAYS.TRAVEL.CIRCUITS' | translate }}
                  </a>
                  <a [routerLink]="['/ways-to-travel/styles']" class="block px-4 py-2 hover:bg-gray-100">
                    {{ 'NAVBAR.WAYS.TRAVEL.TAYLOR' | translate }}
                  </a>
                  <a [routerLink]="['/ways-to-travel/styles']" class="block px-4 py-2 hover:bg-gray-100">
                    MICE
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </li>
      <li class="nav-item relative">
        <!-- Botón para abrir el submenú -->
        <span (click)="toggleAboutUsMenu()" class="cursor-pointer relative flex items-center after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-white after:transition-all after:duration-300 hover:after:w-full">
          {{ 'NAVBAR.ABOUT_US.TITLE' | translate }}
          <i class="fa-solid fa-chevron-down ml-2 text-sm transition-transform"
             [ngClass]="{ 'rotate-180': isMenuAboutUsOpen }"></i>
        </span>

        <!-- Submenú -->
        <div
          class="absolute flex left-0 gap-10 top-full w-[150%] bg-white text-gray-800 shadow-lg  mt-2 p-5 z-50 transition-all duration-300 overflow-visible"
          *ngIf="isMenuAboutUsOpen"
        >
          <div class="w-full font-semibold">
            <a [routerLink]="['/ways-to-travel/theme']" class="flex p-5  hover:bg-gray-100">
              <span>{{ 'NAVBAR.ABOUT_US.OURTEAM' | translate }}</span>
            </a>
            <a [routerLink]="['/ways-to-travel/styles']"  class="flex p-5 hover:bg-gray-100">
              <span>{{ 'NAVBAR.ABOUT_US.LICENSE' | translate }}</span>
            </a>
            <a [routerLink]="['/ways-to-travel/theme']" class="flex p-5  hover:bg-gray-100">
              <span>{{ 'NAVBAR.ABOUT_US.RESPONSIBLE' | translate }}</span>
            </a>
          </div>
        </div>
      </li>
      <li class="nav-item relative inline-block transition-colors duration-500 animate-slideDown">
        <span class="relative cursor-pointer after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-0 after:h-[2px] after:bg-white after:transition-all after:duration-300 hover:after:w-full">
          {{ 'NAVBAR.CONTACT_US' | translate }}
        </span>
      </li>
    </ul>

    <!-- Idioma y contacto -->
    <div class="hidden md:flex items-center gap-6">
      <!-- Idioma -->
      <div class="flex flex-col items-center gap-2">
        <span (click)="changeLanguage('es')" class="cursor-pointer">ESP</span>
        <span (click)="changeLanguage('en')" class="cursor-pointer">ENG</span>
      </div>
      <!-- Teléfono -->
      <div class="relative flex items-center gap-2">
        <i (click)="openWhatsApp()" class="fa-solid fa-phone phone-icon cursor-pointer"></i>
      </div>
    </div>
  </div>

  <!-- Menú móvil -->
  <div
    class="md:hidden fixed top-0 right-[-100%] w-full h-full bg-[#042A4E] z-40 flex flex-col px-6 py-4 transition-all duration-500"
    [ngClass]="{ 'right-0': isMenuOpen }"
  >
    <button class="text-white text-2xl mb-4 self-end" (click)="toggleMenu()">
      <i class="fa-solid fa-xmark"></i>
    </button>
    <a [routerLink]="['/home']" class="text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ 'NAVBAR.HOME' | translate }}</a>
    <a [routerLink]="['/destinations']" class="text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ 'NAVBAR.DESTINATIONS' | translate }}</a>
    <div class="flex items-center justify-between text-white py-2 border-b border-white cursor-pointer" (click)="openSubMenu('ways')">
      {{ 'NAVBAR.WAYS.TITLE' | translate }} <span>></span>
    </div>
    <div class="flex items-center justify-between text-white py-2 border-b border-white cursor-pointer" (click)="openSubMenu('about-us')">
      {{ 'NAVBAR.ABOUT_US.TITLE' | translate }} <span>></span>
    </div>
    <a [routerLink]="['/contact-us']" class="text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ 'NAVBAR.CONTACT_US' | translate }}</a>

    <!-- Idiomas -->
    <div class="flex flex-row items-center gap-2 pt-4">
      <span (click)="changeLanguage('es'); closeAllMenus()" class="cursor-pointer text-white">ESP</span>
      <span (click)="changeLanguage('en'); closeAllMenus()" class="cursor-pointer text-white">ENG</span>
    </div>
  </div>

  <!-- Submenú (Segundo Nivel) -->
  <div
    class="md:hidden fixed top-0 right-[-100%] w-full h-full bg-[#042A4E] z-50 flex flex-col px-6 py-4 transition-all duration-500"
    [ngClass]="{ 'right-0': activeSubMenu }"
  >
    <button class="text-white text-2xl mb-4" (click)="closeSubMenu()">
      <i class="fa-solid fa-arrow-left"></i>
    </button>

    <!-- WAYS TO TRAVEL -->
    <div *ngIf="activeSubMenu === 'ways'">
      <h2 class="font-semibold text-lg pb-2">{{ "NAVBAR.WAYS.TITLE" | translate }}</h2>
      <div (click)="openSubSubMenu('styles')" class="block text-white py-2 border-b border-white cursor-pointer">{{ "NAVBAR.WAYS.STYLES.TITLE" | translate }}</div>
      <div (click)="openSubSubMenu('travel')" class="block text-white py-2 border-b border-white cursor-pointer">{{ "NAVBAR.WAYS.TRAVEL.TITLE" | translate }}</div>
    </div>

    <!-- ABOUT US -->
    <div *ngIf="activeSubMenu === 'about-us'">
      <h2 class="font-semibold text-lg pb-2">{{ "NAVBAR.ABOUT_US.TITLE" | translate }}</h2>
      <a (click)="closeAllMenus()" class="block text-white py-2 border-b border-white cursor-pointer">{{ "NAVBAR.ABOUT_US.OURTEAM" | translate }}</a>
      <a (click)="closeAllMenus()" class="block text-white py-2 border-b border-white cursor-pointer">{{ "NAVBAR.ABOUT_US.LICENSE" | translate }}</a>
      <a (click)="closeAllMenus()" class="block text-white py-2 border-b border-white cursor-pointer">{{ "NAVBAR.ABOUT_US.RESPONSIBLE" | translate }}</a>
    </div>
  </div>

  <!-- Sub-submenú (Tercer Nivel) -->
  <div
    class="md:hidden fixed top-0 right-[-100%] w-full h-full bg-[#042A4E] z-50 flex flex-col px-6 py-4 transition-all duration-500"
    [ngClass]="{ 'right-0': activeSubSubMenu }"
  >
    <button class="text-white text-2xl mb-4" (click)="closeSubSubMenu()">
      <i class="fa-solid fa-arrow-left"></i>
    </button>

    <div *ngIf="activeSubSubMenu === 'styles'">
      <h2 class="font-semibold text-lg pb-2">{{ "NAVBAR.WAYS.STYLES.TITLE" | translate }}</h2>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.STYLES.PREMIUM" | translate }}</a>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.STYLES.DELUXE" | translate }}</a>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.STYLES.COMFORT" | translate }}</a>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.STYLES.SUPERDEALS" | translate }}</a>
    </div>

    <div *ngIf="activeSubSubMenu === 'travel'">
      <h2 class="font-semibold text-lg pb-2">{{ "NAVBAR.WAYS.TRAVEL.TITLE" | translate }}</h2>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.TRAVEL.CRUISE" | translate }}</a>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.TRAVEL.TREKKING" | translate }}</a>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.TRAVEL.FULLDAY" | translate }}</a>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.TRAVEL.FAMILY" | translate }}</a>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.TRAVEL.CIRCUITS" | translate }}</a>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">{{ "NAVBAR.WAYS.TRAVEL.TAYLOR" | translate }}</a>
      <a [routerLink]="['/destinations/bolivia']" class="block text-white py-2 border-b border-white" (click)="closeAllMenus()">MICE</a>
    </div>
  </div>

</nav>
